<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>detail</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/App.css">

    <style>
        hr {
            border: 2px solid #E2ECE2;
        }
        .custom-button {
            background-color: #E2ECE2;
            font-size: 18px;
            color: black;
            border: 2px solid #E2ECE2;
            width: 40%;
        }

        .custom-button {
            font-weight: bold;
        }

        .custom-box p {
            font-weight: bold;
        }

        .custom-text-box {
            border: 1px solid black;
            padding: 10px;
        }

        .image-slider {
            display: block;
            position: relative;
            width: 450px;
            height: 350px;
        }

        .image-container {
            display: block;
        }

        .slide {
            display: none;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .prev, .next {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: #E2ECE2;
            font-size: 24px;
            color: black;
            padding: 10px;
            cursor: pointer;
            user-select: none;
        }

        .prev {
            left: 0;
        }

        .next {
            right: 0;
        }
    </style>
</head>

<body>
<header th:replace="~{/header/header :: headerFragment}"></header>

<div class="container-fluid">
    <div class="row">
        <!-- Sidebar -->
        <header th:replace="~{/sidebar/sidebar :: sidebarFragment}"></header>

        <!-- Main -->
        <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-md-4" style="height: auto; min-height: 100%; margin-left: 200px; margin-bottom: 40px;">
            <br>
            <h3 class="text-center" style="font-weight: bold;"><span th:text="${book.title}"></span></h3>
            <hr>

            <div class="row">
                <div class="col-md-6">
                    <div class="image-slider">
                        <div class="image-container">
                            <img class="slide" th:each="image : ${book.images}" th:src="${image.imagesUrl}" th:alt="${book.title}">
                        </div>
                        <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
                        <a class="next" onclick="plusSlides(1)">&#10095;</a>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card-body" style="padding-top: 50px; padding-bottom: 50px;">
                        <p th:text="'저자: ' + ${book.author}"></p>
                        <p th:text="'출판사: ' + ${book.publisher}"></p>
                        <p th:text="'발행일자: ' + ${book.pubDate}"></p>
                        <p th:text="'기부어: ' + ${book.transactions.giverId}"></p>
                    </div>
                </div>
            </div>

            <div class="d-flex justify-content-center mt-4">
                <a th:href="@{/board/detail/{bookId}/taker(bookId=${book.booksId})}">
                    <button class="custom-button btn btn-primary btn-lg btn-block" style="white-space: nowrap; width: 100%;">나눔 받기</button>
                </a>
            </div>

            <div class="card-body" style="padding-top: 50px; padding-bottom: 50px;">
                <div class="custom-box">
                    <p style="font-size: 20px;">기부어의 한마디</p>
                    <div class="custom-text-box">
                        <span th:text="${book.boards.message}"></span>
                    </div>
                </div>
                <br>
                <div class="custom-box">
                    <p style="font-size: 20px;">책 소개</p>
                    <div class="custom-text-box">
                        <span th:text="${book.description}"></span>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

<footer th:replace="~{/footer/footer :: footerFragment}"></footer>

<script>
    var slideIndex = 1;
    showSlides(slideIndex);

    function plusSlides(n) {
        showSlides(slideIndex += n);
    }

    function showSlides(n) {
        var i;
        var slides = document.getElementsByClassName("slide");
        if (n > slides.length) { slideIndex = 1 }
        if (n < 1) { slideIndex = slides.length }
        for (i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";
            slides[i].style.width = "450px";
            slides[i].style.height = "350px";
        }
        slides[slideIndex - 1].style.display = "block";
    }
</script>

</body>
</html>
