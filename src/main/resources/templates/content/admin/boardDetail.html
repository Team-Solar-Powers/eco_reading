<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>나눔글 관리</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="static/css/App.css">
    <style>
        .carousel-item img {
            display: inline-block;
            width: 100%; /* 가로 폭 설정 */
            height: 350px; /* 세로 높이 설정 */
            background-size: cover; /* 이미지를 div에 맞게 조정 */
            background-position: center; /* 이미지를 가운데 정렬 */
            border: 1px solid #ccc; /* 테두리 추가 */
        }

    </style>
</head>
<body>
<header th:replace="~{/header/header :: headerFragment}"></header>
<!-- Assuming bookList is an array of book objects -->
<div class="container-fluid">
    <div class="row">
        <!-- Sidebar -->
        <header th:replace="~{/sidebar/adminSidebar :: sidebarFragment}"></header>

        <!-- Main Content -->
        <main role="main" class="col-md-9 col-lg-10 px-md-4" style="margin-left: 200px">
            <div class="container mt-5">
                <div class="row">
                    <!-- Loop through the bookList to display each book -->
                    <th:block th:each="book : ${bookList}">
                        <div class="col-md-6">
                            <h2 class="text-center mb-3" th:text="${book.title}"></h2>

                            <!-- Bootstrap Carousel for Image Slider -->
                            <div id="imageCarousel" class="carousel slide" data-ride="carousel">
                                <div class="carousel-inner">
                                    <!-- Loop through book.imagesList to display images -->
                                    <th:block th:each="image, iterStat : ${book.imagesList}">
                                        <div th:classappend="${iterStat.first} ? 'carousel-item active' : 'carousel-item'">
                                            <img th:src="${image.imagesUrl}" th:alt="${book.title}" class="img-fluid">
                                        </div>
                                    </th:block>
                                </div>
                                <a class="carousel-control-prev" href="#imageCarousel" role="button" data-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="sr-only">이전</span>
                                </a>
                                <a class="carousel-control-next" href="#imageCarousel" role="button" data-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="sr-only">다음</span>
                                </a>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <!-- Book Details -->
                            <div class="card mb-3">
                                <div class="card-header">
                                    Book Details
                                </div>
                                <div class="card-body">
                                    <p class="card-text"><strong>저자:</strong> <span th:text="${book.author}"></span></p>
                                    <p class="card-text"><strong>출판사:</strong> <span th:text="${book.publisher}"></span></p>
                                    <p class="card-text"><strong>발행 일자:</strong> <span th:text="${book.pubDate}"></span></p>
                                    <p class="card-text"><strong>기부어 아이디:</strong> <span th:text="${book.transactions.giverId}"></span></p>
                                    <button class="custom-button btn btn-primary btn-lg btn-block">검수 하기</button>
                                </div>
                            </div>

                            <!-- 기부어의 한마디 -->
                            <div class="card mb-3">
                                <div class="card-header">
                                    기부어의 한마디
                                </div>
                                <div class="card-body">
                                    <span th:text="${book.boards.message}"></span>
                                </div>
                            </div>

                            <!-- 책 소개 -->
                            <div class="card mb-3">
                                <div class="card-header">
                                    책 소개
                                </div>
                                <div class="card-body">
                                    <span th:text="${book.description}"></span>
                                </div>
                            </div>
                        </div>
                    </th:block>
                </div>
            </div>
        </main>
    </div>
</div>
<footer th:replace="~{/footer/footer :: footerFragment}"></footer>

<!-- Initialize Bootstrap and jQuery -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<!-- Initialize Bootstrap Carousel -->
<script>
    $(document).ready(function () {
        $('#imageCarousel').carousel();
    });
</script>

</body>
</html>
